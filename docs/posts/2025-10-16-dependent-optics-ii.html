<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Jules Hedges - Dependent optics II: Optics via forcing costates</title>
        <link rel="stylesheet" href="../css/default.css" />
    </head>
    <body>
        <header>
            <div class="logo">
                <a href="../">Jules Hedges</a>
            </div>
            <nav>
                <a href="../">Home</a>
                <a href="../papers.html">Papers</a>
                <a href="../links.html">Links</a>
                <a href="../archive.html">Archive</a>
            </nav>
        </header>

        <main role="main">
            <h1>Dependent optics II: Optics via forcing costates</h1>
            <article>
    <section class="header">
        Posted on October 16, 2025
        
    </section>
    <section>
        <p>(<a href="https://cybercat.institute/2025/10/16/dependent-optics-ii/">X-posted on the CyberCat Institute blog</a>)</p>
<p>I’ve been putting this series of posts off for a long time, although nowhere near as long as we’ve been putting off the corresponding paper.</p>
<p>For anyone who knows anything about my research between 2021 and 2024, dependent optics need no introduction. A team consisting of (in alphabetical order) Dylan Braithwaite, Matteo Capucci, Bruno Gavranović, Eigil Rischel and me put everything we had into the problem of unifying dependent lenses and monoidal optics, for 2 years. We had so many false solutions that “we solved dependent optics!” became a meme, and then we solved it. But by then, time had caught up with us and between us we did not collectively have the ability, energy and motivation to write the paper.</p>
<p>The construction became obscure folklore because we talked about it in various places, for example in <a href="https://www.youtube.com/watch?v=yhxwUnWKK2I">this seminar</a> I gave early this year. I am writing this series of posts to upgrade it from folklore to merely grey literature. The reason I put off starting the series for so long is one of the same reasons blocking the writing of the paper: some of the introductory material is some of the most difficult to write. It has been such a long time that I no longer know how to adequately explain why the problem is <em>so</em> difficult. Additionally, one of the current blockers to a paper is figuring out how our construction relates to the one in <a href="https://arxiv.org/abs/2204.09547">Vertechi’s paper</a>. So, I have made the outrageous choice to <em>start</em> this blog series with part II, and put off writing part I until the end.</p>
<p>The goal of this post is to reconstruct simple optics in the way that turned out to generalise correctly.</p>
<h2 id="a-refresher-on-optics">A refresher on optics</h2>
<p>So that we are all starting from the same place I will give the standard construction of optics, from <a href="https://arxiv.org/abs/1809.00738">this paper</a> and <a href="https://compositionality.episciences.org/13530">this paper</a>.</p>
<p>If we have a symmetric monoidal category <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math>, its category of optics <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Optic} (\mathcal C)</annotation></semantics></math> has as objects pairs of objects of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math>, and morphisms given by elements of the coend
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>X</mi><mo>′</mo></msup><mi>X</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>Y</mi><mo>′</mo></msup><mi>Y</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msup><mo>∫</mo><mrow><mi>M</mi><mo>:</mo><mi>𝒞</mi></mrow></msup><mi>𝒞</mi><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>,</mo><mi>M</mi><mo>⊗</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo><mo>×</mo><mi>𝒞</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo>⊗</mo><msup><mi>Y</mi><mo>′</mo></msup><mo>,</mo><msup><mi>X</mi><mo>′</mo></msup><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex"> \mathbf{Optic} (\mathcal C) \left( \binom{X'}{X}, \binom{Y'}{Y} \right) = \int^{M : \mathcal C} \mathcal C (X, M \otimes Y) \times \mathcal C (M \otimes Y', X') </annotation></semantics></math></p>
<p>A couple of notes on this:</p>
<ol type="1">
<li>If the assumption that <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> is symmetric is dropped this construction still does something, but it does the wrong thing (I may write a future blog post on this point). Symmetry turns out to be necessary for what follows anyway, so I am assuming it here.</li>
<li>I am writing my objects with the backwards pass over the forwards pass, for consistency with the fibrational notation for dependent lenses.</li>
</ol>
<p>If <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> is cartesian monoidal, then <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Optic} (\mathcal C)</annotation></semantics></math> is isomorphic to the category <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐋</mi><mi>𝐞</mi><mi>𝐧</mi><mi>𝐬</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Lens} (\mathcal C)</annotation></semantics></math> of simply-typed lenses. This fact will be important in later posts.</p>
<p>More generally, if we have a span of strong symmetric monoidal functors <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝒞</mi><mover><mo>←</mo><mi>L</mi></mover><mi>ℳ</mi><mover><mo>→</mo><mi>R</mi></mover><mi>𝒟</mi></mrow><annotation encoding="application/x-tex">\mathcal C \overset{L}\leftarrow \mathcal M \overset{R}\rightarrow \mathcal D</annotation></semantics></math> (or equivalently symmetric monoidal actions of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ℳ</mi><annotation encoding="application/x-tex">\mathcal M</annotation></semantics></math> on <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒟</mi><annotation encoding="application/x-tex">\mathcal D</annotation></semantics></math> - I may also write a future post on this point) then the category of mixed optics <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>,</mo><mi>𝒟</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Optic}_\mathcal M (\mathcal C, \mathcal D)</annotation></semantics></math> has as objects pairs of objects of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒟</mi><annotation encoding="application/x-tex">\mathcal D</annotation></semantics></math>, and morphisms given by elements of the coend
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>,</mo><mi>𝒟</mi><mo stretchy="false" form="postfix">)</mo><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>X</mi><mo>′</mo></msup><mi>X</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>Y</mi><mo>′</mo></msup><mi>Y</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msup><mo>∫</mo><mrow><mi>M</mi><mo>:</mo><mi>ℳ</mi></mrow></msup><mi>𝒞</mi><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>,</mo><mi>L</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>⊗</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo><mo>×</mo><mi>𝒟</mi><mo stretchy="false" form="prefix">(</mo><mi>R</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>⊗</mo><msup><mi>Y</mi><mo>′</mo></msup><mo>,</mo><msup><mi>X</mi><mo>′</mo></msup><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex"> \mathbf{Optic}_\mathcal M (\mathcal C, \mathcal D) \left( \binom{X'}{X}, \binom{Y'}{Y} \right) = \int^{M : \mathcal M} \mathcal C (X, L (M) \otimes Y) \times \mathcal D (R (M) \otimes Y', X') </annotation></semantics></math></p>
<p>In both cases, the category of optics is itself a symmteric monoidal category, given on objects by pairwise monoidal product of the underlying categories.</p>
<h2 id="the-bicategory-of-optics">The bicategory of optics</h2>
<p>Categories of optics arise naturally as quotients of bicategories, and this gives a more refined view that will be crucial. With the same setup for mixed optics, we build a symmetric monoidal bicategory <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mn>𝟐</mn><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>,</mo><mi>𝒟</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{2Optic}_\mathcal M (\mathcal C, \mathcal D)</annotation></semantics></math>. Its 0-cells are again pairs of objects of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒟</mi><annotation encoding="application/x-tex">\mathcal D</annotation></semantics></math>, its 1-cells <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>X</mi><mo>′</mo></msup><mi>X</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>→</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>Y</mi><mo>′</mo></msup><mi>Y</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\binom{X'}{X} \to \binom{Y'}{Y}</annotation></semantics></math> are triples
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mi>M</mi><mo>:</mo><mi>ℳ</mi><mo>,</mo><mi>f</mi><mo>:</mo><mi>X</mi><mo>→</mo><mi>L</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>⊗</mo><mi>Y</mi><mo>,</mo><msup><mi>f</mi><mo>′</mo></msup><mo>:</mo><mi>R</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>⊗</mo><msup><mi>Y</mi><mo>′</mo></msup><mo>→</mo><msup><mi>X</mi><mo>′</mo></msup><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex"> \left( M : \mathcal M, f : X \to L (M) \otimes Y, f' : R (M) \otimes Y' \to X' \right) </annotation></semantics></math>
and its 2-cells are morphisms <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>→</mo><msup><mi>M</mi><mo>′</mo></msup></mrow><annotation encoding="application/x-tex">M \to M'</annotation></semantics></math> of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ℳ</mi><annotation encoding="application/x-tex">\mathcal M</annotation></semantics></math> making the resulting diagrams commute.</p>
<p>There are 2 universal ways to turn a bicategory into a category. By far the more common way is to quotient out invertible 2-cells, which turns out to be the same thing (at least for an appropriately weak notion of enrichment) as change of enrichment basis <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>U</mi><mo>*</mo></msup><mo>:</mo><mrow><mi>𝐂</mi><mi>𝐚</mi><mi>𝐭</mi></mrow><mo>−</mo><mrow><mi>𝐂</mi><mi>𝐚</mi><mi>𝐭</mi></mrow><mo>→</mo><mrow><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow><mo>−</mo><mrow><mi>𝐂</mi><mi>𝐚</mi><mi>𝐭</mi></mrow></mrow><annotation encoding="application/x-tex">U^* : \mathbf{Cat}-\mathbf{Cat} \to \mathbf{Set}-\mathbf{Cat}</annotation></semantics></math> along the functor <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mo>:</mo><mrow><mi>𝐂</mi><mi>𝐚</mi><mi>𝐭</mi></mrow><mo>→</mo><mrow><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow></mrow><annotation encoding="application/x-tex">U : \mathbf{Cat} \to \mathbf{Set}</annotation></semantics></math> that takes each category to its set of isomorphism classes.</p>
<p>There is another functor <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mn>0</mn></msub><mo>:</mo><mrow><mi>𝐂</mi><mi>𝐚</mi><mi>𝐭</mi></mrow><mo>→</mo><mrow><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow></mrow><annotation encoding="application/x-tex">\pi_0 : \mathbf{Cat} \to \mathbf{Set}</annotation></semantics></math> that instead takes each category to its set of <em>connected components</em>, quotienting out <em>reachability</em>, or equivalently adding all formal inverses before quotienting out isomorphism. (They are related by a string of adjunctions between <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow><annotation encoding="application/x-tex">\mathbf{Set}</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝐂</mi><mi>𝐚</mi><mi>𝐭</mi></mrow><annotation encoding="application/x-tex">\mathbf{Cat}</annotation></semantics></math>, but I don’t remember the details of that right now.) This is not often seen because most categories encountered in practice - for example any category with either an initial or a terminal object - are <em>connected</em> and sent to the 1-element set by <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>π</mi><mn>0</mn></msub><annotation encoding="application/x-tex">\pi_0</annotation></semantics></math>. But the hom-categories of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mn>𝟐</mn><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>,</mo><mi>𝒟</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{2Optic}_\mathcal M (\mathcal C, \mathcal D)</annotation></semantics></math> are not connected, and in fact:</p>
<p><strong>Lemma</strong>: There is an isomorphism of symmetric monoidal categories <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>π</mi><mn>0</mn><mo>*</mo></msubsup><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mn>𝟐</mn><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="true" form="postfix">)</mo></mrow><mo>≅</mo><msub><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>,</mo><mi>𝒟</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\pi_0^* \left( \mathbf{2Optic} (\mathcal C) \right) \cong \mathbf{Optic}_\mathcal M (\mathcal C, \mathcal D)</annotation></semantics></math>.</p>
<p>Proving that all of this actually coheres with the symmetric monoidal structure is a very minor part of what still needs to be done, that will probably take weeks of effort.</p>
<h2 id="parametrisation">Parametrisation</h2>
<p>Given a strong symmetric monoidal functor <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>:</mo><mi>ℳ</mi><mo>→</mo><mi>𝒞</mi></mrow><annotation encoding="application/x-tex">F : \mathcal M \to \mathcal C</annotation></semantics></math> (or more generally an action of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ℳ</mi><annotation encoding="application/x-tex">\mathcal M</annotation></semantics></math> on <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math>), we can form a symmetric monoidal bicategory <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐏</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Para}_\mathcal M (\mathcal C)</annotation></semantics></math> of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ℳ</mi><annotation encoding="application/x-tex">\mathcal M</annotation></semantics></math>-parametrised morphisms of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math>. Its 0-cells are the 0-cells of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math>, its 1-cells <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \to Y</annotation></semantics></math> are pairs
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo>:</mo><mi>ℳ</mi><mo>,</mo><mi>f</mi><mo>:</mo><mi>F</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>⊗</mo><mi>X</mi><mo>→</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex"> (M : \mathcal M, f : F (M) \otimes X \to Y) </annotation></semantics></math>
and its 2-cells are morphisms <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>→</mo><msup><mi>M</mi><mo>′</mo></msup></mrow><annotation encoding="application/x-tex">M \to M'</annotation></semantics></math> making the resulting diagram commute.</p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐏</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Para}_\mathcal M (\mathcal C)</annotation></semantics></math> is <em>locally fibred</em> over <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ℳ</mi><annotation encoding="application/x-tex">\mathcal M</annotation></semantics></math>: every hom-category is equipped with a fibration <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐏</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>,</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo><mo>→</mo><mi>ℳ</mi></mrow><annotation encoding="application/x-tex">\mathbf{Para}_\mathcal M (\mathcal C) (X, Y) \to \mathcal M</annotation></semantics></math> compatible with the other structure.</p>
<p>There is a dual construction <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐂</mi><mi>𝐨</mi><mi>𝐩</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Copara}_\mathcal M (\mathcal C)</annotation></semantics></math> whose 1-cells are pairs of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>M</mi><annotation encoding="application/x-tex">M</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><mi>F</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>⊗</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \to F (M) \otimes Y</annotation></semantics></math>. This has a local opfibration structure <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐂</mi><mi>𝐨</mi><mi>𝐩</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>,</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo><mo>→</mo><mi>ℳ</mi></mrow><annotation encoding="application/x-tex">\mathbf{Copara}_\mathcal M (\mathcal C) (X, Y) \to \mathcal M</annotation></semantics></math>.</p>
<p>Here is a construction of optics that is a major contributor to the feeling of how close-knit the foundations of categorical cybernetics are, but is not the construction we are looking for: the hom-category <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mn>𝟐</mn><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>,</mo><mi>𝒟</mi><mo stretchy="false" form="postfix">)</mo><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>X</mi><mo>′</mo></msup><mi>X</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>Y</mi><mo>′</mo></msup><mi>Y</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathbf{2Optic}_\mathcal M (\mathcal C, \mathcal D) \left( \binom{X'}{X}, \binom{Y'}{Y} \right)</annotation></semantics></math> is the pullback in <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝐂</mi><mi>𝐚</mi><mi>𝐭</mi></mrow><annotation encoding="application/x-tex">\mathbf{Cat}</annotation></semantics></math> of this opfibration and fibration:
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐂</mi><mi>𝐨</mi><mi>𝐩</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>,</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo><mo>→</mo><mi>ℳ</mi><mo>←</mo><msub><mrow><mi>𝐏</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒟</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">(</mo><msup><mi>Y</mi><mo>′</mo></msup><mo>,</mo><msup><mi>X</mi><mo>′</mo></msup><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex"> \mathbf{Copara}_\mathcal M (\mathcal C) (X, Y) \rightarrow \mathcal M \leftarrow \mathbf{Para}_\mathcal M (\mathcal D) (Y', X') </annotation></semantics></math></p>
<h2 id="forcing-costates">Forcing costates</h2>
<p>Suppose we have a symmetric monoidal category <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> and a lax symmetric monoidal presheaf <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>:</mo><msup><mi>𝒞</mi><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msup><mo>→</mo><mrow><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow></mrow><annotation encoding="application/x-tex">K : \mathcal C^\mathrm{op} \to \mathbf{Set}</annotation></semantics></math> to the cartesian monoidal category of sets. The lax monoidal structure is given by a unit <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>:</mo><mi>K</mi><mo stretchy="false" form="prefix">(</mo><mi>I</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">e : K (I)</annotation></semantics></math> and a laxator
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>∇</mi><mo>:</mo><mi>K</mi><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo stretchy="false" form="postfix">)</mo><mo>×</mo><mi>K</mi><mo stretchy="false" form="prefix">(</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo><mo>→</mo><mi>K</mi><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>⊗</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex"> \nabla : K (X) \times K (Y) \to K (X \otimes Y) </annotation></semantics></math>
We want to formally adjoin, or <em>force</em>, all of the elements <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>:</mo><mi>K</mi><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">x : K (X)</annotation></semantics></math> to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> as costates <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>:</mo><mi>X</mi><mo>→</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">x : X \to I</annotation></semantics></math>, modulo all of the evident equations arising from the structure of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>K</mi><annotation encoding="application/x-tex">K</annotation></semantics></math>.</p>
<p>We take the category of elements <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∫</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">\int K</annotation></semantics></math>, whose objects are pairs <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>:</mo><mi>𝒞</mi><mo>,</mo><mi>x</mi><mo>:</mo><mi>K</mi><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(X : \mathcal C, x : K (X))</annotation></semantics></math> and whose morphisms are morphisms <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \to Y</annotation></semantics></math> making the resulting diagram commute. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∫</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">\int K</annotation></semantics></math> is a symmetric monoidal category with the monoidal unit <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>I</mi><mo>,</mo><mi>e</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(I, e)</annotation></semantics></math> and the monoidal product <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>,</mo><mi>x</mi><mo stretchy="false" form="postfix">)</mo><mo>⊗</mo><mo stretchy="false" form="prefix">(</mo><mi>Y</mi><mo>,</mo><mi>y</mi><mo stretchy="false" form="postfix">)</mo><mo>=</mo><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>⊗</mo><mi>Y</mi><mo>,</mo><mi>x</mi><mi>∇</mi><mi>y</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(X, x) \otimes (Y, y) = (X \otimes Y, x \nabla y)</annotation></semantics></math>, and is equipped with a strong symmetric monoidal fibration <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∫</mo><mi>K</mi><mo>→</mo><mi>𝒞</mi></mrow><annotation encoding="application/x-tex">\int K \to \mathcal C</annotation></semantics></math>.</p>
<p>We form the symmetric monoidal bicategory <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐂</mi><mi>𝐨</mi><mi>𝐩</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mrow><mo>∫</mo><mi>K</mi></mrow></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Copara}_{\int K} (\mathcal C)</annotation></semantics></math> for this functor. Its 0-cells are objects of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math>, its 1-cells <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X \to Y</annotation></semantics></math> are triples
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo>:</mo><mi>𝒞</mi><mo>,</mo><mi>m</mi><mo>:</mo><mi>K</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>,</mo><mi>f</mi><mo>:</mo><mi>X</mi><mo>→</mo><mi>M</mi><mo>⊗</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex"> (M : \mathcal C, m : K (M), f : X \to M \otimes Y) </annotation></semantics></math>
and its 2-cells are morphisms <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>→</mo><msup><mi>M</mi><mo>′</mo></msup></mrow><annotation encoding="application/x-tex">M \to M'</annotation></semantics></math> of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ℳ</mi><annotation encoding="application/x-tex">\mathcal M</annotation></semantics></math> making the resulting diagrams commute.</p>
<p>The hom-categories <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐂</mi><mi>𝐨</mi><mi>𝐩</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mrow><mo>∫</mo><mi>K</mi></mrow></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>,</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Copara}_{\int K} (\mathcal C) (X, Y)</annotation></semantics></math> are once again not connected. Here is the sledgehammer theorem:</p>
<p><strong>Theorem</strong> (<a href="https://www.sciencedirect.com/science/article/pii/S1571066109003053">Hermida &amp; Tennent</a>, dualised and reformulated). <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝒞</mi><mo stretchy="false" form="prefix">[</mo><mi>K</mi><mo stretchy="false" form="postfix">]</mo><mo>=</mo><msubsup><mi>π</mi><mn>0</mn><mo>*</mo></msubsup><mrow><mo stretchy="true" form="prefix">(</mo><msub><mrow><mi>𝐂</mi><mi>𝐨</mi><mi>𝐩</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mrow><mo>∫</mo><mi>K</mi></mrow></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal C [K] = \pi_0^* \left( \mathbf{Copara}_{\int K} (\mathcal C) \right)</annotation></semantics></math> is the smallest symmetric monoidal category that contains <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> and contains a morphism <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>:</mo><mi>X</mi><mo>→</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">x : X \to I</annotation></semantics></math> for each element <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>:</mo><mi>K</mi><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">x : K (X)</annotation></semantics></math> modulo the evident equations.</p>
<p>I’ve talked about this construction before in its original dual form for forcing states from a copresheaf rather than costates from a presheaf, in <a href="../posts/2024-02-22-iteration-optics.html">this post</a>, to add iteration to categories of optics. The pictures in that post are helpful for understanding how this construction works.</p>
<h2 id="from-adaptors-to-optics">From adaptors to optics</h2>
<p>We will now apply this theorem to construct categories of optics.</p>
<p>Given a symmetric monoidal category <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math>, we can form the symmetric monoidal category <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo>=</mo><mi>𝒞</mi><mo>×</mo><msup><mi>𝒞</mi><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msup></mrow><annotation encoding="application/x-tex">\mathbf{Adt} (\mathcal C) = \mathcal C \times \mathcal C^\mathrm{op}</annotation></semantics></math> with the pairwise monoidal product. We call the morphisms of this category <em>adaptors</em>, and think of them as optics whose backwards pass does not use its forwards input. There is an embedding <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo>→</mo><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Adt} (\mathcal C) \to \mathbf{Optic} (\mathcal C)</annotation></semantics></math> that is identity on objects and always chooses <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">M = I</annotation></semantics></math>.</p>
<p>The hom functor of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> is a presheaf <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>hom</mi><mo>⁡</mo></mrow><mo>:</mo><mrow><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><msup><mo stretchy="false" form="postfix">)</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msup><mo>=</mo><msup><mi>𝒞</mi><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msup><mo>×</mo><mi>𝒞</mi><mo>→</mo><mrow><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow></mrow><annotation encoding="application/x-tex">\hom : \mathbf{Adt} (\mathcal C)^\mathrm{op} = \mathcal C^\mathrm{op} \times \mathcal C \to \mathbf{Set}</annotation></semantics></math>, and it is lax symmetric monoidal. (It is strong monoidal if and only if <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> is cartesian monodial.) It turns out that if we take <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">A</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">t</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{Adt} (\mathcal C)</annotation></semantics></math> and adjoin a morphism <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>X</mi><mo>′</mo></msup><mi>X</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>→</mo><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><mi>I</mi><mi>I</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\binom{X'}{X} \to \binom{I}{I}</annotation></semantics></math> for every underlying morphism <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><msup><mi>X</mi><mo>′</mo></msup></mrow><annotation encoding="application/x-tex">X \to X'</annotation></semantics></math>, we get exactly the category of optics:</p>
<p><strong>Lemma</strong>: There is an isomorphism of symmetric monoidal bicategories <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐂</mi><mi>𝐨</mi><mi>𝐩</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mrow><mo>∫</mo><mi>hom</mi></mrow></msub><mo stretchy="false" form="prefix">(</mo><mrow><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="postfix">)</mo><mo>≅</mo><mrow><mn>𝟐</mn><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Copara}_{\int \hom} (\mathbf{Adt} (\mathcal C)) \cong \mathbf{2Optic} (\mathcal C)</annotation></semantics></math>, and therefore an isomorphism of symmetric monoidal categories <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">[</mo><mrow><mi>hom</mi><mo>⁡</mo></mrow><mo stretchy="false" form="postfix">]</mo><mo>≅</mo><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Adt} (\mathcal C) [\hom] \cong \mathbf{Optic} (\mathcal C)</annotation></semantics></math>.</p>
<p>This also works for general mixed optics. Suppose we have a span of strong symmetric monoidal functors <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>𝒞</mi><mover><mo>←</mo><mi>L</mi></mover><mi>ℳ</mi><mover><mo>→</mo><mi>R</mi></mover><mi>𝒟</mi></mrow><annotation encoding="application/x-tex">\mathcal C \overset{L}\leftarrow \mathcal M \overset{R}\rightarrow \mathcal D</annotation></semantics></math>. We form a lax symmetric monoidal functor <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>:</mo><msup><mi>𝒞</mi><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msup><mo>×</mo><mi>𝒟</mi><mo>→</mo><mrow><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow></mrow><annotation encoding="application/x-tex">K : \mathcal C^\mathrm{op} \times \mathcal D \to \mathbf{Set}</annotation></semantics></math> by
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mrow><mo stretchy="true" form="prefix">(</mo><mfrac linethickness="0"><msup><mi>X</mi><mo>′</mo></msup><mi>X</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msup><mo>∫</mo><mrow><mi>M</mi><mo>:</mo><mi>ℳ</mi></mrow></msup><mi>𝒞</mi><mo stretchy="false" form="prefix">(</mo><mi>X</mi><mo>,</mo><mi>L</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="postfix">)</mo><mo>×</mo><mi>𝒟</mi><mo stretchy="false" form="prefix">(</mo><mi>R</mi><mo stretchy="false" form="prefix">(</mo><mi>M</mi><mo stretchy="false" form="postfix">)</mo><mo>,</mo><mi>Y</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex"> K \binom{X'}{X} = \int^{M : \mathcal M} \mathcal C (X, L (M)) \times \mathcal D (R (M), Y) </annotation></semantics></math>
Then:</p>
<p><strong>Lemma</strong>: There is an isomorphism of symmetric monoidal bicategories <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>𝐂</mi><mi>𝐨</mi><mi>𝐩</mi><mi>𝐚</mi><mi>𝐫</mi><mi>𝐚</mi></mrow><mrow><mo>∫</mo><mi>K</mi></mrow></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>×</mo><msup><mi>𝒟</mi><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msup><mo stretchy="false" form="postfix">)</mo><mo>≅</mo><msub><mrow><mn>𝟐</mn><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>,</mo><mi>𝒟</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Copara}_{\int K} (\mathcal C \times \mathcal D^\mathrm{op}) \cong \mathbf{2Optic}_\mathcal M (\mathcal C, \mathcal D)</annotation></semantics></math>, and therefore an isomorphism of symmetric monoidal categories <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>×</mo><msup><mi>𝒟</mi><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msup><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">[</mo><mi>K</mi><mo stretchy="false" form="postfix">]</mo><mo>≅</mo><msub><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mi>ℳ</mi></msub><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo>,</mo><mi>𝒟</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(\mathcal C \times \mathcal D^\mathrm{op}) [K] \cong \mathbf{Optic}_\mathcal M (\mathcal C, \mathcal D)</annotation></semantics></math>.</p>
<p>If <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> is cartseian monoidal then of course we also have an isomorphism <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐋</mi><mi>𝐞</mi><mi>𝐧</mi><mi>𝐬</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo>≅</mo><mrow><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">[</mo><mrow><mi>hom</mi><mo>⁡</mo></mrow><mo stretchy="false" form="postfix">]</mo></mrow><annotation encoding="application/x-tex">\mathbf{Lens} (\mathcal C) \cong \mathbf{Adt} (\mathcal C) [\hom]</annotation></semantics></math>. It will be useful to write a direct proof of this fact instead of cutting the equations <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">[</mo><mrow><mi>hom</mi><mo>⁡</mo></mrow><mo stretchy="false" form="postfix">]</mo><mo>≅</mo><mrow><mi>𝐎</mi><mi>𝐩</mi><mi>𝐭</mi><mi>𝐢</mi><mi>𝐜</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo>≅</mo><mrow><mi>𝐋</mi><mi>𝐞</mi><mi>𝐧</mi><mi>𝐬</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Adt} (\mathcal C)[\hom] \cong \mathbf{Optic} (\mathcal C) \cong \mathbf{Lens} (\mathcal C)</annotation></semantics></math>, but I will put this off until a later post as a practice run for the main theorem of dependent optics.</p>
<p>Now we can reformulate the dependent optics question: given appropriate structure on <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math> we need to construct a symmetric monoidal category <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐃</mi><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{DAdt} (\mathcal C)</annotation></semantics></math> of <em>dependent adaptors</em> and a lax symmetric monoidal presheaf <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>:</mo><mrow><mi>𝐃</mi><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><msup><mo stretchy="false" form="postfix">)</mo><mrow><mi mathvariant="normal">o</mi><mi mathvariant="normal">p</mi></mrow></msup><mo>→</mo><mrow><mi>𝐒</mi><mi>𝐞</mi><mi>𝐭</mi></mrow></mrow><annotation encoding="application/x-tex">K : \mathbf{DAdt} (\mathcal C)^\mathrm{op} \to \mathbf{Set}</annotation></semantics></math> with the property that <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi>𝐃</mi><mi>𝐀</mi><mi>𝐝</mi><mi>𝐭</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo><mo stretchy="false" form="prefix">[</mo><mi>K</mi><mo stretchy="false" form="postfix">]</mo><mo>≅</mo><mrow><mi>𝐃</mi><mi>𝐋</mi><mi>𝐞</mi><mi>𝐧</mi><mi>𝐬</mi></mrow><mo stretchy="false" form="prefix">(</mo><mi>𝒞</mi><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{DAdt} (\mathcal C) [K] \cong \mathbf{DLens} (\mathcal C)</annotation></semantics></math> is the category of <em>dependent</em> lenses in <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>𝒞</mi><annotation encoding="application/x-tex">\mathcal C</annotation></semantics></math>. (Of course we have to rule out trivial solutions like taking <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>K</mi><annotation encoding="application/x-tex">K</annotation></semantics></math> to be the terminal presheaf.) This is what we will do over this series of posts.</p>
    </section>
</article>

        </main>

        <footer>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </footer>
    </body>
</html>
